<div class="container-xxl flex-grow-1 container-p-y">
  <h4 class="py-3 mb-0">
    <span class="text-muted fw-light">هنرجویان / </span>
    بروزرسانی هنرجو
  </h4>
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-3">
    <div class="d-flex flex-column justify-content-center">
      <h4 class="mb-1 mt-3">بروزرسانی هنرجو</h4>
    </div>
    <!-- <div class="d-flex align-content-center flex-wrap gap-3">
      <button class="btn btn-primary" name="submitButton" type="submit">ارسال</button>
    </div> -->
  </div>
  <form class="row"  id="formValidationNewStudent" method="POST" action="/api/v1/students/<%- student._id %>>/update-profile" enctype="multipart/form-data">
    <div class="col-12 col-lg-8 mb-4">
      <div class="card">
        <h5 class="card-header">اطلاعات شخصی</h5>
        <div class="card-body">
          <!-- Account Details -->
          <div class="row">
            <div class="col-12 mb-3">
              <div class="d-flex align-items-start align-items-sm-center gap-4">
                <img alt="کاربر-آواتار" class="d-block w-px-100 h-px-100 rounded" id="uploadedAvatar" src="<%- student.imageUrl ? student.imageUrl :
                "/uploads/profile-student.jpg" %>" />
                <div class="button-wrapper">
                  <label class="btn btn-primary me-2 mb-3" for="upload" tabindex="0">
                    <span class="d-none d-sm-block">آپلود عکس جدید</span>
                    <i class="ti ti-upload d-block d-sm-none"></i>
                    <input accept="image/png, image/jpeg" class="account-file-input" hidden id="upload" type="file" name="studentProfile" />
                  </label>
                  <button class="btn btn-label-secondary account-image-reset mb-3" type="button">
                    <i class="ti ti-refresh-dot d-block d-sm-none"></i>
                    <span class="d-none d-sm-block">حذف عکس</span>
                  </button>
                  <div class="text-muted">حداکثر حجم 2 مگابایت فرمت png , jpeg , jpg</div>
                </div>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label" for="firstName">نام</label>
              <input class="form-control" id="firstName" name="firstName" placeholder="" type="text" value="<%- student.firstName %>" />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label" for="lastName">نام خانوادگی</label>
              <input class="form-control" id="lastName" name="lastName" placeholder="معماری" type="text" value="<%- student.lastName %>" />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label" for="nationalCode">کدملی</label>
              <input
                aria-label=""
                maxlength="10"
                class="form-control ltr"
                id="nationalCode"
                name="nationalCode"
                placeholder="4900782343"
                type="text"
                value="<%- student.nationalCode %>"
              />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label" for="bs-datepicker-birthday">تاریخ تولد</label>
              <input
                class="form-control"
                maxlength="10"
                id="bs-datepicker-birthday"
                name="birthDay"
                placeholder="1378/06/22"
                type="text"
                value="<%- student.birthDay %>"
              />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label" for="fatherName">نام پدر</label>
              <input class="form-control" id="fatherName" name="fatherName" placeholder="علیرضا" type="text" value="<%- student.fatherName %>" />
            </div>
            <div class="col-md-6 mb-3">
              <label class="d-block form-label">جنسیت</label>
              <div class="d-flex col">
                <div class="row mt-0 col">
                  <div class="col-6">
                    <div class="form-check custom-option">
                      <label class="p-2 d-flex justify-content-center align-items-center form-check-label custom-option-content" for="radio-man">
                        <input <%- student.gender === "مرد" && "checked" %> checked class="form-check-input" id="radio-man" name="gender" type="radio"
                        value="مرد" />
                        <span class="custom-option-body">
                          <span class="custom-option-title ms-2">مرد</span>
                        </span>
                      </label>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-check custom-option">
                      <label class="p-2 d-flex justify-content-center align-items-center form-check-label custom-option-content" for="radio-female">
                        <input <%- student.gender === "زن" && "checked" %> class="form-check-input" id="radio-female" name="gender" type="radio" value="زن" />
                        <span class="custom-option-body">
                          <span class="custom-option-title ms-2">زن</span>
                        </span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label" for="mobile">تلفن همراه</label>
              <input
                class="form-control prefix-mask ltr"
                maxlength="11"
                id="mobile"
                name="mobile"
                placeholder="09#########"
                type="text"
                value="<%- student.mobile %>"
              />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label" for="phone">تلفن داخلی</label>
              <input maxlength="12" class="form-control ltr" id="phone" name="phone" placeholder="" type="text" value="<%- student.phone %>" />
            </div>

            <div class="mb-3 col-md-6 ecommerce-select2-dropdown">
              <label class="form-label" for="bs-datepicker-register-date">تاریخ ثبت نام</label>
              <input
                class="form-control"
                maxlength="10"
                id="bs-datepicker-register-date"
                name="registerDate"
                placeholder="1402/12/20"
                type="text"
                value="<%- student.registerDate %>"
              />
            </div>

            <div class="col mb-3">
              <div class="form-group">
                <label class="form-label" for="ecommerce-product-name">آدرس</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" name="address" rows="2"><%- student.address %></textarea>
              </div>
            </div>
          </div>

          <div class="col-12">
            <button id="btn-create-student" class="btn btn-primary" name="submitButton" type="submit">ثبت هنرجو</button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-lg-4">
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-0">اطلاعات باشگاه</h5>
        </div>
        <div class="card-body">
          <!-- Vendor -->
          <div class="mb-3 col-12">
            <label class="form-label" for="club">انتخاب باشگاه</label>
            <select
              class="form-select select2"
              data-allow-clear="true"
              id="club"
              data-placeholder="انتخاب باشگاه"
              onchange="selectBoxClub(event,'<%- encodeURIComponent(JSON.stringify(coachs))%>')"
              name="club"
            >
              <option value="">انتخاب باشگاه</option>
              <% for (const club of clubs) { %>
              <option <%- student.club.name === club.name && "selected" %> value="<%- club._id %>"><%- club.name %></option>
              <% } %>
            </select>
          </div>

          <div class="mb-3 col-12 d-none" id="error-empty-coach">
            <div class="d-flex flex-column align-items-center justify-content-center">
              <span class="text-danger">مربی برای باشگاه وجود ندارد!</span>
              <a href="/coach/register"><button class="btn btn-primary waves-effect waves-light mt-3" type="button">ثبت مربی جدید</button></a>
            </div>
          </div>


          <% let coachSelect = coachs.filter((coach) => coach.clubs.some((club) => club._id.toString() == student.club._id)) %>

          <div class="mb-3 col-12 " id="select-box-coachs">
            <label class="form-label mb-1" for="coach">انتخاب مربی</label>
            <select class="form-select select2" name="coach" data-allow-clear="true" data-placeholder="انتخاب مربی" id="coach">
              <% for (const coach of coachSelect) { %>
                <option <%- student.coach._id == coach._id.toString()  && "selected" %> value="<%- coach._id %>"><%- coach.firstName %> <%- coach.lastName %></option>
              <% } %>
            </select>
          </div>

        </div>
      </div>
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-0">اطلاعات کمربند</h5>
        </div>
        <div class="card-body">
          <!-- Vendor -->
          <div class="mb-3 col-12">
            <label class="form-label mb-1" for="belt">کمربند فعلی</label>
            <select class="select2 form-select" name="belt" data-allow-clear="true" data-placeholder="انتخاب کمربند" id="belt">
              <option value="">انتخاب کمربند</option>
              <% for (const belt of belts) { %>
              <option <%- student.belt.name === belt.name && "selected" %> value="<%- belt._id %>"><%- belt.name %></option>
              <%} %>
            </select>
          </div>

          <div class="mb-3 col-12">
            <label class="form-label" for="bs-datepicker-belt-date">تاریخ کمربند</label>
            <input
              class="form-control"
              maxlength="10"
              id="bs-datepicker-belt-date"
              name="beltDate"
              placeholder="1400/02/06"
              type="text"
              value="<%- student.belt.beltDate %>"
            />
          </div>
        </div>
      </div>
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-0">اطلاعات بیشتر</h5>
        </div>
        <div class="card-body">
          <div class="mb-3 col ecommerce-select2-dropdown">
            <label class="form-label" for="bs-datepicker-sportsInsurance-date">تاریخ بیمه ورزشی</label>
            <input
              class="form-control"
              maxlength="10"
              id="bs-datepicker-sportsInsurance-date"
              placeholder="1400/05/06"
              type="text"
              value="<%- student.sportsInsuranceDate %>"
            />
          </div>

          <div class="col-12 mb-3">
            <label class="form-label" for="memberShipValidity">شارژ بانک اطلاعاتی</label>
            <input
              maxlength="4"
              class="form-control"
              id="memberShipValidity"
              name="memberShipValidity"
              placeholder="1402"
              type="text"
              value="<%- student.memberShipValidity.date %>"
            />
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
